export default function waterfall(t,e=15,l=15){"string"==typeof t&&(t=document.querySelector(t));let i=null;t.style.position="relative";const o=[].map.call(t.children,o=>(o.style.position="absolute",o.querySelector("img").onload=(()=>{clearTimeout(i),i=setTimeout(()=>{waterfall(t,e,l)},200)}),o)),n=o.length;if(0===n)return;const r=o[0].clientWidth;let c=Math.floor(t.clientWidth/r);if(c>1)for(;(t.clientWidth-c*r)/(c-1)<l;)c--;l=(t.clientWidth-c*r)/(c-1);const a=new Array(c),s=t=>{let e=0,l=t[0];for(let i=1,o=t.length;i<o;i++)t[i]<l&&(e=i,l=t[i]);return[l,e]};for(let t=0;t<c&&t<n;t++){let i=o[t];i.style.top="0",i.style.left=t*(l+r)+"px",a[t]=i.clientHeight+e}for(let t=c;t<n;t++){let i=o[t],[n,c]=s(a);i.style.top=n+"px",i.style.left=c*(l+r)+"px",a[c]+=i.clientHeight+e}t.style.height=Math.max(...a)+"px"};
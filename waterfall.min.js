export default function waterfall(t,e=15,l=15){"string"==typeof t&&(t=document.querySelector(t));let o=null;t.style.position="relative";const i=[].map.call(t.children,i=>(i.style.position="absolute",i.querySelector("img").onload=(()=>{clearTimeout(o),o=setTimeout(()=>{waterfall(t,e,l)},200)}),i)),n=i.length;if(0===n)return;const r=i[0].clientWidth;let c=Math.floor(t.clientWidth/r);for(;(t.clientWidth-c*r)/(c-1)<l;)c--;l=(t.clientWidth-c*r)/(c-1);const a=new Array(c),s=t=>{let e=0,l=t[0];for(let o=1,i=t.length;o<i;o++)t[o]<l&&(e=o,l=t[o]);return[l,e]};for(let t=0;t<c&&t<n;t++){let o=i[t];o.style.top="0",o.style.left=t*(l+r)+"px",a[t]=o.clientHeight+e}for(let t=c;t<n;t++){let o=i[t],[n,c]=s(a);o.style.top=n+"px",o.style.left=c*(l+r)+"px",a[c]+=o.clientHeight+e}t.style.height=Math.max(...a)+"px"};